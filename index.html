<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Dynamons World</title>
	<link type="image/png" rel="icon" href="favicon.png">

	<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="cordova_plugins.js"></script>
	
	<script type="text/javascript" src="./lib/RaygunHelper.js"></script>
	<script type="text/javascript" src="./lib/firebase-app.js"></script>
	<script type="text/javascript" src="./lib/firebase-database.js"></script>
	<script type="text/javascript" src="./lib/core-js.js"></script>
	<script type="text/javascript" src="./lib/array.polyfill.js"></script>
	<script type="text/javascript" src="./lib/ApplovinWrap.js"></script>
	<script type="text/javascript" src="./lib/date.polyfill.js"></script>
	<script type="text/javascript" src="./lib/int-8-array.polyfill.js"></script>
	<script type="text/javascript" src="./lib/math.polyfill.js"></script>
	<script type="text/javascript" src="./lib/number.polyfill.js"></script>
	<script type="text/javascript" src="./lib/string.polyfill.js"></script>
	<script type="text/javascript" src="./lib/uint-8-array.polyfill.js"></script>
	<script type="text/javascript" src="./lib/window.polyfill.js"></script>
	<script type="text/javascript" src="./lib/promise-finaly.polyfill.js"></script>
	<script type="text/javascript" src="./lib/web-audio-api-shim.min.js"></script>

	<style>
        html,body { margin: 0; padding: 0; height: 100%;}
        #content { background: #000000; width: 100%; height: 100%; z-index: 1;}
        
    </style>
</head>
<body>



<div id="version" style="z-index: 999; position: absolute; color: white; left: 75%;">1.12.08</div>

<div id="content"></div>

<script type="text/javascript">
	function addScript(src, buster, callback) {
		var s = document.createElement('script');
		s.setAttribute('src', src + '?v=' + buster);
		if (typeof callback === 'function') {
			s.onload = callback;
		}
		document.body.appendChild(s);
	}

	function getSize () {
		var orientation = "portrait";
		var element = document.getElementById("content");
		var clientWidth = element.clientWidth;
		var clientHeight = element.clientHeight;
		var minWidth = 320 ;
		var minHeight = 420 ;
		var finalWidth = minWidth;
		var finalHeight = minHeight;
		
		if (orientation == "portrait")
		{
			var currRatio = clientHeight / clientWidth;
			var minRatio = minHeight / finalWidth;
			var maxHeight = 840 ;
			if (maxHeight == null) maxHeight = finalHeight;
			var maxRatio = maxHeight / finalWidth;
			if (currRatio <= minRatio)
			{
				finalHeight = minHeight;
			}
			else if (currRatio >= maxRatio)
			{
				finalHeight = maxHeight;
			}
			else
			{
				finalHeight = Math.floor(finalWidth * currRatio);
			}
		}
		else if (orientation == "landscape")
		{
			var currRatio = clientWidth / clientHeight;
			var minRatio = minWidth / finalHeight;
			var maxWidth = null ;
			console.log(maxWidth);
			if (maxWidth == null) maxWidth = finalWidth;
			var maxRatio = maxWidth / finalHeight;
			if (currRatio <= minRatio)
			{
				finalWidth = minWidth;
			}
			else if (currRatio >= maxRatio)
			{
				finalWidth = maxWidth;
			}
			else
			{
				finalWidth = Math.floor(finalHeight * currRatio);
			}
		}

		return {width: finalWidth, height: finalHeight};
	}

	document.addEventListener("backbutton", function(){}, false);
	document.addEventListener("deviceready", function() {
	
	
		addScript('version.js', Date.now(), function () {
			addScript("./dynamons_world.min.js", version, function () {
				var size = getSize();
				lime.embed("dynamons_world", "content", size.width * 2, size.height * 2, {background:"000000"});
			});
		});
	
	});
	
	
</script>

</body>
</html>
